<mxfile host="app.diagrams.net" modified="2021-05-31T09:52:39.479Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.104 Safari/537.36" etag="b6tJ-NXfTgE1tN4M7lV-" version="14.7.3" type="github" pages="2">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="2635" dy="1695" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="k2YI5_YI2uwewbOjL1un-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-0" target="k2YI5_YI2uwewbOjL1un-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-0" value="EXTB005 13类型" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="300" y="-90" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-1" target="k2YI5_YI2uwewbOjL1un-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-1" value="OSPB001、OSPB002校验成功" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="300" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-6" value="是" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-3" target="k2YI5_YI2uwewbOjL1un-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-3" value="判断是否是灵活计费的订单" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="300" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-8" value="0000" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-5" target="k2YI5_YI2uwewbOjL1un-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-10" value="1001接受失败（产品不存在）&lt;br&gt;1002接受失败（订单重复）" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-5" target="k2YI5_YI2uwewbOjL1un-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-5" value="调用一级账务进行扣费，接口名称待定" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="300" y="490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-7" target="k2YI5_YI2uwewbOjL1un-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="250" y="760" />
              <mxPoint x="360" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-7" value="主订单更新为支付中" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="190" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-9" target="k2YI5_YI2uwewbOjL1un-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="470" y="760" />
              <mxPoint x="360" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-9" value="主订单更新为支付失败" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="410" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-11" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="345" y="820" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="k2YI5_YI2uwewbOjL1un-14" target="k2YI5_YI2uwewbOjL1un-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-14" value="生成主订单的时候从产品中获取是否是灵活计费产品，并写入主订单中" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="300" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k2YI5_YI2uwewbOjL1un-17" value="数据库主订单t_order添加字段&lt;br style=&quot;font-size: 13px&quot;&gt;是否为灵活计费的订单is_flexible_charge&lt;br style=&quot;font-size: 13px&quot;&gt;&lt;span style=&quot;font-size: 13px&quot;&gt;省端扣费流水号&lt;/span&gt;province_order_id&lt;br style=&quot;font-size: 13px&quot;&gt;&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 13px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%E8%AE%A2%E5%8D%95%E6%89%A3%E8%B4%B9%E7%BB%93%E6%9E%9C%E5%8F%8D%E9%A6%88%EF%BC%8C%E6%8E%A5%E5%8F%A3%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22340%22%20y%3D%22300%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="520" y="-50" width="330" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="EUnz_LY8OMkIUQ4r6tvI" name="Page-2">
    <mxGraphModel dx="1422" dy="762" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-0" />
        <mxCell id="dYdY6W_APtDa_cqt6I0e-1" parent="dYdY6W_APtDa_cqt6I0e-0" />
        <mxCell id="JR55I7riFO1rs68Sx2Q--3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="dYdY6W_APtDa_cqt6I0e-1" source="dYdY6W_APtDa_cqt6I0e-2" target="JR55I7riFO1rs68Sx2Q--2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-2" value="一级账务反馈" style="html=1;dashed=0;whitespace=wrap;shape=mxgraph.dfd.start" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="360" y="140" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-3" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="399" y="890" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-7" value="&lt;p class=&quot;MsoNormal&quot;&gt;是&lt;/p&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="dYdY6W_APtDa_cqt6I0e-1" target="dYdY6W_APtDa_cqt6I0e-6">
          <mxGeometry x="0.032" relative="1" as="geometry">
            <mxPoint x="400" y="440" as="sourcePoint" />
            <mxPoint x="320" y="610" as="targetPoint" />
            <Array as="points">
              <mxPoint x="400" y="500" />
              <mxPoint x="320" y="500" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-9" value="否" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="dYdY6W_APtDa_cqt6I0e-1" source="JR55I7riFO1rs68Sx2Q--1" target="dYdY6W_APtDa_cqt6I0e-8">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="470" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="400" y="500" />
              <mxPoint x="500" y="500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="dYdY6W_APtDa_cqt6I0e-1" source="dYdY6W_APtDa_cqt6I0e-6" target="dYdY6W_APtDa_cqt6I0e-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-6" value="更新为扣费失败" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="264" y="600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="dYdY6W_APtDa_cqt6I0e-1" source="dYdY6W_APtDa_cqt6I0e-8" target="dYdY6W_APtDa_cqt6I0e-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-8" value="更新为扣费成功，记录&lt;span style=&quot;font-size: 10pt&quot;&gt;&lt;b&gt;省端扣费流水号&lt;/b&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="444" y="600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="dYdY6W_APtDa_cqt6I0e-1" source="dYdY6W_APtDa_cqt6I0e-10" target="dYdY6W_APtDa_cqt6I0e-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dYdY6W_APtDa_cqt6I0e-10" value="调用EXTF005接口" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="354" y="770" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JR55I7riFO1rs68Sx2Q--1" value="&lt;span style=&quot;font-size: 13.3333px ; background-color: rgb(255 , 255 , 255)&quot;&gt;省端扣费流水号是否为999999&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="340" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JR55I7riFO1rs68Sx2Q--4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="dYdY6W_APtDa_cqt6I0e-1" source="JR55I7riFO1rs68Sx2Q--2" target="JR55I7riFO1rs68Sx2Q--1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JR55I7riFO1rs68Sx2Q--2" value="订单扣费结果反馈，接口" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="340" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SUtqSqYs2XHc6qZdX6hT-1" value="EXTB005添加字段&lt;br&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;calibri&amp;#34; ; color: rgb(255 , 0 , 0)&quot;&gt;suppOrderId：否&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(255 , 0 , 0)&quot;&gt;权益平台&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;calibri&amp;#34; ; color: rgb(255 , 0 , 0)&quot;&gt;&lt;font face=&quot;等线&quot;&gt;订单号&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;calibri&amp;#34; ; color: rgb(255 , 0 , 0)&quot;&gt;suppSubOrderId: 否&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(255 , 0 , 0)&quot;&gt;权益平台子&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;calibri&amp;#34; ; color: rgb(255 , 0 , 0)&quot;&gt;&lt;font face=&quot;等线&quot;&gt;订单号&lt;i&gt;&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;i&gt;&lt;span style=&quot;color: rgb(255 , 0 , 0)&quot;&gt;&lt;font face=&quot;宋体&quot;&gt;此单号指权益中台对应的能开订单的单号，由于权益中台针对能开的一个&lt;/font&gt;“主订单&lt;font face=&quot;Calibri&quot;&gt;+&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;子订单”的请求只会生成一个单号，因此本字段的值&lt;/font&gt;&lt;font face=&quot;Calibri&quot;&gt;=&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;calibri&amp;#34; ; color: rgb(255 , 0 , 0)&quot;&gt;&amp;nbsp;suppOrderId&lt;/span&gt;&lt;span style=&quot;color: rgb(255 , 0 , 0)&quot;&gt;的值&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;font color=&quot;#ff0000&quot; face=&quot;等线&quot;&gt;goodsIdentity：&lt;span&gt;	&lt;/span&gt;否&lt;span&gt;	&lt;/span&gt;商品特殊标识&lt;span&gt;	&lt;/span&gt;01：普通商品；02：灵活计费商品；未填写时，按照01处理&lt;/font&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;font color=&quot;#ff0000&quot; face=&quot;等线&quot;&gt;payNumber：&lt;span&gt;	&lt;/span&gt;否&lt;span&gt;	&lt;/span&gt;扣费流水号&lt;span&gt;	&lt;/span&gt;当status=SC并且goodsIdentity=02时必填&lt;/font&gt;&lt;/p&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;fontSize=13;verticalAlign=middle;align=left;" vertex="1" parent="dYdY6W_APtDa_cqt6I0e-1">
          <mxGeometry x="630" y="600" width="410" height="240" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
